<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>購物車</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>購物車</h1>

    <div id="product-list">
        <h2>商品列表</h2>
        <ul>
            <li>
                商品1 - $10 <button class="add-to-cart" data-name="商品1" data-price="10">添加到購物車</button>
            </li>
            <li>
                商品2 - $20 <button class="add-to-cart" data-name="商品2" data-price="20">添加到購物車</button>
            </li>
            <li>
                商品3 - $30 <button class="add-to-cart" data-name="商品3" data-price="30">添加到購物車</button>
            </li>
        </ul>
    </div>

    <div id="cart">
        <h2>購物車</h2>
        <ul id="cart-items">
            <!-- 購物車內容將動態添加到這裡 -->
        </ul>
        <p>Total: $<span id="cart-total">0</span></p>
        <button id="checkout">結帳</button>
    </div>

    <script>
        $(document).ready(function () {
            let cart = [];

            // 添加商品到購物車
            $(document).on('click', '.add-to-cart', function () {
                const productName = $(this).data('name');
                const price = $(this).data('price');

                let found = false;
                $.each(cart, function (index, item) {
                    if (item.name === productName) {
                        item.quantity++;
                        found = true;
                    }
                });

                if (!found) {
                    cart.push({ name: productName, price: price, quantity: 1 });
                }

                updateCart();
            });

            // 更新購物車內容
            function updateCart() {
                const cartItems = $('#cart-items');
                const cartTotal = $('#cart-total');
                cartItems.empty();
                let total = 0;

                $.each(cart, function (index, item) {
                    const listItem = $('<li>');
                    const increaseBtn = $('<button>').text('+');
                    const decreaseBtn = $('<button>').text('-');
                    const quantitySpan = $('<span>').text(`${item.name} - $${item.price} x ${item.quantity}`);

                    increaseBtn.click(function () {
                        item.quantity++;
                        updateCart();
                    });

                    decreaseBtn.click(function () {
                        if (item.quantity > 1) {
                            item.quantity--;
                        } else {
                            // 如果数量减少到1以下，将商品从购物车中删除
                            cart.splice(index, 1);
                        }
                        updateCart();
                    });

                    listItem.append(decreaseBtn);
                    listItem.append(quantitySpan);
                    listItem.append(increaseBtn);
                    cartItems.append(listItem);

                    total += item.price * item.quantity;
                });

                cartTotal.text(total);
            }


			function moveToCheckOut() {
				window.location();
            // 可以使用JavaScript的window.location来跳转到购物车页面
        }
           
        });
    </script>
</body>
</html>
