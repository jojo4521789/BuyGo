<!DOCTYPE html>
<!--[if IE 7 ]><html class="ie ie7 lte9 lte8 lte7" lang="en-US"><![endif]-->
<!--[if IE 8]><html class="ie ie8 lte9 lte8" lang="en-US"> <![endif]-->
<!--[if IE 9]><html class="ie ie9 lte9" lang="en-US"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="noIE" lang="zh-Hant"><!--<![endif]-->
<!--<![endif]-->

<head>
	<meta charset="UTF-8" />
	<title id="title"></title>
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- Favorite Icons -->
	<link rel="icon" href="../../../img/common/favicon/favicon.html" type="image/x-icon" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144"
		href="../../../img/common/favicon/apple-touch-icon-144x144-precomposed.html">
	<link rel="apple-touch-icon-precomposed" sizes="72x72"
		href="../../../img/common/favicon/apple-touch-icon-72x72-precomposed.html">
	<link rel="apple-touch-icon-precomposed" href="../../../img/common/favicon/apple-touch-icon-precomposed.html">
	<!-- // Favorite Icons -->

	<!--<link href='http://fonts.useso.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>-->

	<!-- GENERAL CSS FILES -->
	<link rel="stylesheet" href="../../../css/common/minified.css">
	<!-- // GENERAL CSS FILES -->

	<!--[if IE 8]>
		<script src="js/respond.min.js"></script>
		<script src="js/selectivizr-min.js"></script>
 	<![endif]-->

	<!--
	<script src="js/jquery.min.js"></script>
	-->

	<script>window.jQuery || document.write('<script src="../../../js/common/jquery.min.js"><\/script>');</script>
	<script src="../../../js/common/modernizr.min.js"></script>
	<!-- PARTICULAR PAGES CSS FILES -->
	<link rel="stylesheet" href="../../../css/common/jquery.nouislider.css">
	<link rel="stylesheet" href="../../../css/common/owl.carousel.css">
	<link rel="stylesheet" href="../../../css/common/owl.theme.css">
	<link rel="stylesheet" href="../../../css/common/innerpage.css">
	<link href="../../../css/common/flexslider.css" rel="stylesheet" />
	<!-- // PARTICULAR PAGES CSS FILES -->
	<link rel="stylesheet" href="../../../css/common/responsive.css">

	<style>
		.logo img {
			max-width: 200px;
			max-height: 150px;
		}

		.user-menu a img {
			max-width: 20px;
			max-height: 20px;
		}

		ul.user_menu>ul>a {
			color: #ef7700;
			font-weight: bold;
			font-size: 25px;
		}

		a:hover {
			color: #0150ed;
		}

		.rec-entry-title {
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.rec-entry-title>a {
			font-size: 20px;
		}

		.product {
			width: 220px;
		}

		#feature_products {
			display: flex;
			justify-content: space-around;
		}

		#new_products {
			display: flex;
			justify-content: space-around;
		}

		.cart-entry-title {
			overflow: hidden;
			white-space: nowrap;
			text-overflow: ellipsis;
		}

		.cart-entry-title>a {
			font-size: 12px;
		}

		.cart-footer .s-cart-total {
			background: #fff;
			font-size: 12px;
			font-weight: 700;
			padding: 1em;
			color: #1f1f1f;
		}

		.product-medialist .item .s-close {
			background: #1f1f1f;
			opacity: 1;
			color: #FFF;
			text-shadow: none;
			width: 16px;
			height: 16px;
			font-size: 14px;
			text-align: center;
			margin: 0 0 4px 4px;
			-webkit-transition: all .1s ease;
			-moz-transition: all .1s ease;
			-o-transition: all .1s ease;
			-ms-transition: all .1s ease;
			transition: all .1s ease;
		}

		button.s-close {
			padding: 0;
			cursor: pointer;
			background: 0 0;
			border: 0;
			/* -webkit-appearance: none; */
		}

		.s-close {
			float: right;
			font-size: 21px;
			font-weight: 700;
			line-height: 1;
			color: #000;
			text-shadow: 0 1px 0 #fff;
			opacity: .2;
			filter: alpha(opacity=20);
		}

		.product {
			width: 273px;
			display: inline-block;
			margin-right: 7px;
			margin-left: 7px
		}

		#thumbnails {
			overflow: auto;
			max-height: auto;
		}

		/* Image Slider CSS Start  滑動圖片CSS*/

		body {
			background: #e6e6e6;
		}

		#slider {
			width: 80%;
			margin: 0 auto;
			position: relative;
			overflow: hidden;
			box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.4);
			;
		}

		/* 注意要將.slide 改成.slide2 */
		.slide2 {

			width: 100%;
			display: none;
			animation-name: fade;
			animation-duration: 1s;

		}

		img {
			width: 100%;
		}

		@keyframes fade {
			from {
				opacity: 0.5;
			}

			to {
				opacity: 1;
			}
		}

		.controls {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			font-size: 1.5em;
			padding: 15px 10px;
			border-radius: 5px;

		}

		.controls:hover {
			background: white;
			transition: 0.3s;
		}

		.controls:active_dot {
			color: grey;
		}

		#left-arrow {
			left: 10px;
		}

		#right-arrow {
			right: 10px;
		}

		#dots-con {

			text-align: center;
		}

		.dot {
			display: inline-block;
			background: grey;
			padding: 8px;
			border-radius: 50%;
			margin: 10px 5px;
		}

		/* .active 修改成.active_dot  */
		.active_dot {
			background: rgb(220, 135, 32);
		}

		@media (max-width:576px) {
			#slider {
				width: 100%;

			}

			.controls {
				font-size: 1em;
			}

			#dots-con {
				display: none;
			}
		}

		/* Image Slider CSS End 滑動圖片CSS*/

		#delegateButton {
			border-radius: 4px;
			background-color: #d98c5c;
			color: #353535;
			cursor: pointer;
			border: none;
			cursor: pointer;
		}

		#delegateButton:hover {
			background-color: #b67045;
		}
	</style>
</head>

<body class="product-single">

	<body class="home">

		<!-- PAGE WRAPPER -->
		<div id="page-wrapper">

			<!-- SITE HEADER -->
			<header id="site-header" role="banner">
				<!-- HEADER TOP -->
				<div class="header-top">
					<div class="container">
						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-7">
								<!-- CONTACT INFO -->
								<div class="contact-info">
									<i class="iconfont-headphones round-icon"></i>
									<strong>(03)425-1108</strong>
									<span>(Mon- Fri: 09.00 - 21.00)</span>
								</div>
								<!-- // CONTACT INFO -->
							</div>
							<div class="col-xs-12 col-sm-6 col-md-5">
								<ul class="actions unstyled clearfix">
									<li>
										<!-- SEARCH BOX -->
										<div class="search-box">
											<form action="#" method="post">
												<div class="input-iconed prepend">
													<button class="input-icon"><i class="iconfont-search"></i></button>
													<label for="input-search" class="placeholder">Search here…</label>
													<input type="text" name="q" id="input-search"
														class="round-input full-width" required />
												</div>
											</form>
										</div>
										<!-- // SEARCH BOX -->
									</li>
									<li data-toggle="sub-header" data-target="#sub-social">
										<!-- SOCIAL ICONS -->
										<a href="javascript:void(0);" id="social-icons">
											<i class="iconfont-share round-icon"></i>
										</a>

										<div id="sub-social" class="sub-header">
											<ul class="social-list unstyled text-center">
												<li><a href="#"><i class="iconfont-facebook round-icon"></i></a></li>
												<li><a href="#"><i class="iconfont-twitter round-icon"></i></a></li>
												<li><a href="#"><i class="iconfont-google-plus round-icon"></i></a></li>
												<li><a href="#"><i class="iconfont-pinterest round-icon"></i></a></li>
												<li><a href="#"><i class="iconfont-rss round-icon"></i></a></li>
											</ul>
										</div>
										<!-- // SOCIAL ICONS -->
									</li>
									<li data-toggle="sub-header" data-target="#sub-cart">
										<!-- SHOPPING CART -->
										<a href="javascript:void(0);" id="total-cart">
											<i class="iconfont-shopping-cart round-icon"></i>
										</a>

										<div id="sub-cart" class="sub-header">
											<div class="cart-header">
												<span>Your cart is currently empty.</span>
												<small><a href="/BuyGo/front_end/pages/member/pa/paCart/paCart.html">(See All)</a></small>
											</div>
											<!-- <ul class="cart-items product-medialist unstyled clearfix"></ul> -->
											<ul class="s-cart-items product-medialist unstyled clearfix"></ul>
											<div class="cart-footer">
												<!-- <div class="cart-total clearfix">
													   <span class="pull-left uppercase">Total</span>
													   <span class="pull-right total">$ 0</span>
												   </div> -->
												<div class="s-cart-total clearfix">
													<span class="pull-left uppercase">Total</span>
													<span class="pull-right total">$ 0</span>
												</div>
												<div class="text-right">
													<a href="/BuyGo/front_end/pages/member/pa/paCart/paCart.html"
														class="btn btn-default btn-round view-cart">查看購物車</a>
												</div>
											</div>
										</div>
										<!-- // SHOPPING CART -->
									</li>
								</ul>
							</div>
						</div>
					</div>

					<!-- ADD TO CART MESSAGE -->
					<div class="cart-notification">
						<ul class="unstyled"></ul>
					</div>
					<!-- // ADD TO CART MESSAGE -->
				</div>
				<!-- // HEADER TOP -->
				<!-- MAIN HEADER -->
				<div class="main-header-wrapper">
					<div class="container">
						<div class="main-header">
							<!-- CURRENCY / LANGUAGE / USER MENU -->
							<div class="actions">
								<div class="center-xs">

								</div>
								<div class="clearfix"></div><br>
								<!-- USER RELATED MENU -->
								<nav id="tiny-menu" class="clearfix">
									<ul class="user-menu">
										<li><a href="/BuyGo/front_end/pages/member/myaccount.html" class="personal">我的帳戶<img
													src="/BuyGo/front_end/img/common/head.png"></a>
										</li>
										<!-- <li><a href="pages/member/opa/cart/cart.html" class="paymoney">結帳<img
				   src="../front_end/img/common/paymoney.png"></a></li> -->
										<li id="logInAndLogOut"><a href="/BuyGo/front_end/pages/member/login.html"
												class="loginOut">登入<img src="/BuyGo/front_end/img/common/login.png"></a>
										</li>
									</ul><br>
								</nav>
								<!-- // USER RELATED MENU -->
							</div>
							<!-- // CURRENCY / LANGUAGE / USER MENU -->
							<!-- SITE LOGO -->
							<div class="logo-wrapper">
								<a href="index-2.html" class="logo">
									<img src="/BuyGo/front_end/img/common/buygo.png" />
								</a>
							</div>
							<!-- // SITE LOGO -->
							<!-- SITE NAVIGATION MENU -->
							<nav id="site-menu" role="navigation">
								<ul class="main-menu hidden-sm hidden-xs">
									<li class="active">
										<a href="/BuyGo/front_end/index.html">首頁</a>
									</li>
									<li>
										<a href="/BuyGo/front_end/pages/guest/pa/prods/prods.html">一般賣場</a>
									</li>
									<li>
										<a href="/BuyGo/front_end/pages/guest/opa/prods/prods.html">官方賣場</a>
									</li>
									<li>
										<a href="/BuyGo/front_end/pages/components.html">揪團商場</a>
									</li>
									<li>
										<a href="/BuyGo/front_end/pages/Articles.html">論壇</a>
									</li>
								</ul>

								<!-- MOBILE MENU -->
								<div id="mobile-menu" class="dl-menuwrapper visible-xs visible-sm">
									<button class="dl-trigger"><i class="iconfont-reorder round-icon"></i></button>

								</div>
								<!-- // MOBILE MENU -->

							</nav>
							<!-- // SITE NAVIGATION MENU -->
						</div>
					</div>
				</div>
				<!-- // MAIN HEADER -->
			</header>
			<!-- // SITE HEADER -->

			<!-- BREADCRUMB -->
			<div class="breadcrumb-container">
				<div class="container">
					<div class="relative">
						<ul class="bc unstyled clearfix">
							<li><a href="#">Home</a></li>
							<li><a href="products.html">Products</a></li>
							<li class="active">Product Detail</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- // BREADCRUMB -->

			<!-- SITE MAIN CONTENT -->
			<main id="main-content" role="main">

				<section class="section">
					<!-- <section class="section" id="section-big" style=" padding: 50px 220px;"> -->
					<div class="container">
						<div class="row">
							<!-- PRODUCT PREVIEW -->

							<div class="col-xs-12 col-sm-4">

								<div class="product-preview">

									<!--Controlling arrows (按鈕)-->
									<span class="controls" onclick="prevSlide(-1)" id="left-arrow"
										style="position:absolute; z-index:9999; left: 5px; top: 200px">
										<i class="iconfont-angle-left" aria-hidden="true"></i>
									</span>
									<span class="controls" id="right-arrow" onclick="nextSlide(1)"
										style="position:absolute; z-index:9999; right: 5px; top: 200px">
										<i class="iconfont-angle-right" aria-hidden="true"></i>
									</span>

									<div style=" width: 400px; height:400px;">

										<div id="slider" style=" width: 400px; height:400px;">
										</div>

									</div>

									<div id="dots-con">
										<!-- <span class="dot"></span> -->
									</div>

								</div>

							</div>
							<!-- // PRODUCT PREVIEW -->
							<div class="space40 visible-xs"></div>

							<!-- PRODUCT DETAILS -->

							<div class="col-xs-12 col-sm-8">
								<section class="product-details add-cart">
									<header class="entry-header">
										<h2 class="entry-title uppercase" id="prodName"></h2>
									</header>
									<article class="entry-content" style="font-size: 15px;">
										<figure>
											<span class="entry-price inline-middle" id="prodPrice"></span>

											<ul class="entry-meta unstyled">
												<li><span class="key">賣家:</span> <span class="value"
														id="memberNo"></span>
													<button id="delegateButton">委託此賣家</button>
												</li>
												<li><span class="key">商品編號:</span> <span class="value"
														id="prodNo"></span>
												</li>
												<li><span class="key">商品類別:</span> <span class="value"
														id="prodObj"></span>
												</li>
												<li><span class="key">已售出數量:</span> <span class="value"
														id="shipQty"></span>
												</li>
												<li><span class="key">庫存數量:</span> <span class="value"
														id="stockQty"></span>
												</li>
												<li><span class="key">商品說明:</span> <span class="value"
														id="prodText"></span>
												</li>
											</ul>

											<ul class="inline-li li-m-r-l m-t-lg">
												<!-- <li><a href="#" class="btn btn-default btn-lg btn-round report-button"
													style="background: #be3232">檢舉商品</a>
											</li> -->
												<li style="padding: 0px 60px;"></li>
												<li><a href="#" class="btn btn-default btn-lg btn-round add-to-cart"
														onclick="addToCart(0)">加入購物車</a>
												</li>
											</ul>

										</figure>
									</article>
								</section>
							</div>
							<!-- // PRODUCT DETAILS -->
						</div>
					</div>
				</section>

				<!-- FEATURED PRODUCTS -->
				<div style="height: auto;">

					<hr style="width: calc(100% - 200px); height: 1px; font-weight: bold; background-color: white;">
					<h3 class="section-title" style="text-align: center; margin: 0;">推薦商品</h3>
					<p style="text-align: center; color: gray;">為您推薦同類型中您可能有興趣的商品</p>

					<div id="ranRecommend" style="margin-left: 45px; overflow: auto;">

					</div>



				</div>
				<!-- // FEATURED PRODUCTS -->

			</main>
			<!-- // SITE MAIN CONTENT -->

			<!-- SITE FOOTER -->
			<footer class="page-footer">

				<!-- WIDGET AREA -->
				<div class="widgets">

					<!-- FIRST ROW -->

					<!-- // FIRST ROW -->

					<!-- SECOND ROW -->
					<div class="section">
						<div class="container">
							<div class="row">

								<div class="col-xs-12 col-sm-12 col-md-5">
									<section class="widget widget-menu">
										<h5 class="widget-title">Contact info</h5>
										<div class="widget-content">
											<ul class="menu iconed-list unstyled">
												<li><span class="list-icon"><i
															class="round-icon iconfont-map-marker"></i></span>
													<div class="list-content">中壢區復興路 46 號緯育 TibaMe 附設中壢職訓中心 9 樓</div>
												</li>
												<li><span class="list-icon"><i
															class="round-icon iconfont-phone"></i></span>
													<div class="list-content">(03) 425-1108</div>
												</li>
												<li><span class="list-icon"><i
															class="round-icon iconfont-envelope-alt"></i></span>
													<div class="list-content">tibamecha102g6@gmail.com</div>
												</li>
											</ul>
										</div>
									</section>
								</div>

								<div class="col-xs-12 col-sm-12 col-md-6">
									<section class="widget widget-ads">
										<div class="widget-content">
											<div class="center-xs">
												<div class="ads">
													<a href="#"> <img src="../../../img/common/demo/images-footer.jpg"
															alt="" />
													</a>
												</div>
											</div>
										</div>
									</section>
								</div>
							</div>
						</div>
					</div>
					<!-- // SECOND ROW -->

				</div>
				<!-- // WIDGET AREA -->

				<div class="footer-sub">
					<div class="container">
						<div class="row">
							<div class="col-xs-12 col-sm-6">
								<div class="footer-links center-xs clearfix">
									<ul class="unstyled">
										<li><a href="#">FAQ</a></li>
									</ul>
								</div>
								<div class="space10"></div>
								<div class="copyright center-xs">
									<p>(c) 2023</p>
								</div>
							</div>

							<div class="space40 visible-xs"></div>


						</div>
					</div>
				</div>

			</footer>
			<!-- // SITE FOOTER -->

		</div>
		<!-- // PAGE WRAPPER -->

		<!-- Essential Javascripts -->
		<script src="../../../js/common/minified.js"></script>
		<!-- // Essential Javascripts -->

		<!-- Particular Page Javascripts -->
		<script src="../../../js/common/jquery.nouislider.js"></script>
		<script src="../../../js/common/owl.carousel.js"></script>
		<script src="../../../js/common/products.js"></script>
		<!-- // Particular Page Javascripts -->

		<!-- Disqus -->
		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'gfashion';		// required: replace example with your forum shortname

			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function () {
				var dsq = document.createElement('script'); dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<!-- // Disqus -->

		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

		<script src="../../../js/login.js"></script>

		<script>

			// Image Slider js Start (圖片滑動顯示)

			var index = 0;
			var slides, dots;

			function prevSlide(n) {
				index += n;
				var slides = document.querySelectorAll(".slide2");
				console.log("prevSlide is called");
				changeSlide(slides);
			}

			function nextSlide(n) {
				index += n;
				var slides = document.querySelectorAll(".slide2");
				changeSlide(slides);
			}

			function changeSlide(slides) {

				var dots = document.querySelectorAll(".dot");

				if (index > slides.length - 1)
					index = 0;

				if (index < 0)
					index = slides.length - 1;

				for (let i = 0; i < slides.length; i++) {
					slides[i].style.display = "none";
					dots[i].classList.remove("active_dot");
				}

				slides[index].style.display = "block";
				dots[index].classList.add("active_dot");
			}

			// Image Slider js End (圖片滑動顯示)


			window.addEventListener("load", function () {

				//---------------------------------------元素-------------------------------------------------------
				//檢查客戶帳號是否登入，修改頁面右上方Log In/Log Out按鈕，顯示登入者帳號名稱
				const checkLogin = checkLoginStatusShowMemberAcct();
				let = "";

				const title_el = document.querySelector("#title")
				const memberNo_el = document.querySelector("#memberNo");
				const prodName_el = document.querySelector("#prodName");
				const prodObj_el = document.querySelector("#prodObj");
				const prodPrice_el = document.querySelector("#prodPrice");
				const shipQty_el = document.querySelector("#shipQty");
				const stockQty_el = document.querySelector("#stockQty");
				const prodNo_el = document.querySelector("#prodNo");
				const prodText_el = document.querySelector("#prodText");

				const objName_el = document.querySelector("#objName");
				const objPrice_el = document.querySelector("#objPrice");

				const delegateButton_el = document.getElementById("delegateButton")

				let paProdPicNoArray = [];
				let count = 0;

				let sellerNo;

				//---------------------------------------fetch-------------------------------------------------------

				//網址切換part
				const queryString = window.location.search;
				const urlParms = new URLSearchParams(queryString);
				let prodId = urlParms.get("prodId");

				loadProdDetail(prodId); // 傳入商品編號

				const full = location.protocol + '//' + location.host;
				console.log(full);

				// 載入頁面時讀取商品詳細資訊
				function loadProdDetail(paProdNo) {
					const paProdList_el = $("#paProdList");

					paProdList_el.children().remove();

					paProdPicNoArray = [];

					fetch('/BuyGo/api/front_end/paProdInfo', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json;charset:utf-8' },
						body: JSON.stringify({
							paProdNo: paProdNo
						})
					})

						.then(resp => resp.json())
						.then(body => {

							const memberNo = body.memberNo;
							const paProdNo = body.paProdNo;
							const paProdObjNo = body.paProdObjNo;
							const prodPrice = body.paProdPrice;
							const shipQty = body.paProdShipQty;
							const stockQty = body.paProdStockQty;
							const prodName = body.paProdName;
							const prodText = body.paProdContent;

							title_el.append(`BuyGo - ` + (prodName) + `- 商品詳情`)
							prodNo_el.append(paProdNo);
							prodObj_el.append(changeObjText(paProdObjNo));
							prodPrice_el.append(`$ ` + (prodPrice));
							shipQty_el.append(shipQty);
							stockQty_el.append(stockQty);
							prodName_el.append(prodName);
							prodText_el.append(prodText);

							slides = document.querySelectorAll(".slide2");
							dots = document.querySelectorAll(".dot");

							//圖片載入
							if (body.paProdPic.length !== 0) {

								// $("#slider").html(`<img class="firstPic" src="${body.paProdPic[0].paProdPic}" alt="無法載入圖片" />`); (原本的第一張要拿掉)

								let count_dot = 0;

								for (let paPrPic of body.paProdPic) {

									count_dot++;

									//注意要將.slide 改成.slide2
									var html = `
											<div class="slide2">
    											<img src="${paPrPic.paProdPic}" >
  											</div>
                                		`;

									$("#slider").append(html);
								}

								//代表圖片數量的點點 Start (圖片滑動顯示)
								for (let d = 1; d <= count_dot; d++) {

									var dot_html = `
												<span class="dot"></span>
											`;
									$("#dots-con").append(dot_html);
								}

								var slides = document.querySelectorAll(".slide2"); //注意要將.slide 改成.slide2
								var dots = document.querySelectorAll(".dot");

								changeSlide(slides);

								//代表圖片數量的點點 End (圖片滑動顯示)

							} else {
								$("#img_main_view").attr("src", "../../back_end/img/common/Image_not_available.png");
							}


							//把會員編號轉成會員名稱
							fetch('/BuyGo/api/front_end/GetSellerName', {
								method: 'POST',
								headers: { 'Content-Type': 'application/json;charset=utf-8' },
								body: JSON.stringify({
									memberNo: memberNo
								})
							})

								.then(resp => resp.json())
								.then(data => {

									sellerNo = data.memberNo;
									const memberName = data.memberName

									memberNo_el.append(memberName);
								})


							//用商品類別抓4個商品資訊

							const ranRecommend_el = $("#ranRecommend");
							let count = 0;

							fetch('/BuyGo/api/front_end/ranPaProdInfo', {
								method: 'POST',
								headers: { 'Content-Type': 'application/json;charset=utf-8' },
								body: JSON.stringify({
									paProdObjNo: paProdObjNo
								})
							}).then(response => response.json())
								.then(body => {

									body.forEach(random => {
										console.log();
										count++;
										const { paProdName, paProdPrice, paProdNo } = random;

										//這邊有幾項記得改成點選可以跳轉該商品及購物車
										let productDiv = `

										<div class="product" data-product-id="${count}" data-category="${paProdName}" data-brand="brand1"
											data-price="" data-colors="red|blue|black|white" data-size="S|M|L">
											<div class="entry-media" style=" min-height: 220px; overflow: hidden">
												<div class="hover" style="height: auto;">
													<img src="${random.paProdPic[0].paProdPic}" class="entry-url" style="height: 100%">
													<ul class="icons unstyled">
														<li><a href="${full}/BuyGo/front_end/pages/member/pa/paProduct.html?prodId=${paProdNo}" class="circle" data-toggle="lightbox"> <i class="iconfont-search"></i>
															</a></li>
														<li><a href="#" class="circle add-to-cart" onclick="addToCart(${paProdNo});"> <i
																	class="iconfont-shopping-cart"></i>
															</a></li>
													</ul>
												</div>
											</div>
											<div class="entry-main" style="border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">
												<h5 class="entry-title">
													<a href="${full}/BuyGo/front_end/pages/member/pa/paProduct.html?prodId=${paProdNo}">${paProdName}</a>
												</h5>
												<div class="entry-description visible-list">
													<p>${paProdName}</p>
												</div>
												<div class="entry-price">
													<strong class="price" style="color: #fa6f57; font-weight: bold;">$ ${paProdPrice}</strong>
												</div>
											</div>
										</div>

										`;


										ranRecommend_el.append(productDiv);

									})

								})

						})


				}

				//將商品類別的編號轉成文字資訊
				function changeObjText(paProdObjNo) {
					switch (paProdObjNo) {
						case 1:
							return '女生衣著';
						case 1:
							return '美食';
						case 3:
							return '伴手禮';
						case 4:
							return '手機平板與周邊';
						case 5:
							return '文創用品';
						case 6:
							return '書籍及雜誌期刊';
						case 7:
							return '男女鞋';
						case 8:
							return '娛樂、收藏';
						case 9:
							return '男生包包與配件';
						case 10:
							return '服務、票券';
						case 11:
							return '男生衣著';
						case 12:
							return '汽機車零件百貨';
						case 13:
							return '嬰幼兒與母親';
						case 14:
							return '3C與筆電';
						case 15:
							return '居家生活';
						case 16:
							return '女姓配件/黃金';
						case 17:
							return '寵物';
						case 18:
							return '戶外/旅行';
						case 19:
							return '運動/健身';
						case 20:
							return '電玩遊戲';
						case 21:
							return '女性包包/精品';
						case 22:
							return '家電影音';
						case 23:
							return '其他類別';
						default:
							return '出現錯誤，請聯繫客服人員';
					}

				}

				// 委託賣家按鈕
				delegateButton_el.addEventListener("click", function () {

					checkLogin.then(function (memberDetail) {

						// 檢查是否有登入會員

						if (memberDetail && memberDetail[0] && memberDetail[1] !== undefined) {

							let memberNo = memberDetail[0];
							let memberAcct = memberDetail[1];

							Swal.fire({
								title: '委託此賣家',
								text: '將跳轉至委託頁面',
								icon: 'info',
								showCancelButton: true,
								confirmButtonText: '確認',
								cancelButtonText: '取消',
							}).then((result) => {
								if (result.isConfirmed) {
									// 確認後跳轉頁面
									let sellerId = sellerNo;
									let sellerName = document.querySelector("#memberNo").textContent;;

									let sellerInfo = {
										memberNo: memberNo,
										sellerId: sellerId,
										sellerName: sellerName
									}
									console.log(sellerInfo);
									sessionStorage.setItem("seller_Info", JSON.stringify(sellerInfo));
									// Swal.fire(window.location = "http://localhost:8081/BuyGo/front_end/pages/member/pa/req/AddPaReq.html");
									Swal.fire(window.location.pathname = "/BuyGo/front_end/pages/member/pa/req/AddPaReq.html");
								}
							});

						} else {

							alert("請先登入會員，將跳轉至登入畫面");
							// window.location = "http://localhost:8081/BuyGo/front_end/pages/member/login.html";
							window.location.pathname = "/BuyGo/front_end/pages/member/login.html";

						}

					})
						.catch(function (error) {
							console.error(error);
						});
				});

			});

			//加入購物車

			function addToCart(paProdNo) {

				const queryString = window.location.search;
				const urlParms = new URLSearchParams(queryString);
				let prodId = urlParms.get("prodId");

				if (paProdNo === 0) {
					paProdNo = prodId;
				}
				checkLoginStatusShowMemberAcct();
				let paCartId = {
					memberNo: null,
					paProdNo: paProdNo
				}

				fetch("/BuyGo/needLoginApi/pa/cart/selectById", {
					method: "POST",
					headers: {
						"Content-Type": "application/json; charset=utf-8",
					},
					body: JSON.stringify({ paCartId }),
				})
					.then(resp => {
						if (resp.status === 401) {
							// 客戶未登入，執行頁面重定向到登入頁
							notLoggedInAction();
						} else if (resp.ok) {
							// 請求成功
							return resp.json();
						} else {
							alert("錯誤狀態" + resp.status);
							return;
						}
					})
					.then(data => {
						let paOrdQty = 1;
						if (data !== null) {
							paOrdQty = data.paOrdQty + 1;
						}

						fetch("/BuyGo/needLoginApi/pa/cart/update", {
							method: "POST",
							headers: {
								"Content-Type": "application/json; charset=utf-8",
							},
							body: JSON.stringify({
								paCartId: paCartId,
								paProdSum: 1200,
								paOrdQty: paOrdQty
							}),
						})
							.then(resp => resp.json())
							.then(body => {
								const { successful } = body;
								if (successful) {
									updateCartItem();
								}
							});
					});

				function updateCartItem() {

					fetch("/BuyGo/needLoginApi/pa/cart/selectByMember", {
						method: "POST",
						headers: {
							"Content-Type": "application/json; charset=utf-8",
						},
						// body: JSON.stringify({ paCartId }),
					})
						.then(resp => {
							if (resp.status === 401) {
								// 客戶未登入，不撈取購物車資料
								return;
							} else if (resp.ok) {
								// 請求成功
								return resp.json();
							} else {
								alert("錯誤狀態" + resp.status);
								return;
							}
						})
						.then(datas => {
							if (datas && datas.length > 0) {
								$(".cart-header").addClass("-none");
								let cart_li = "";
								let prodGrandTotal = 0;
								for (let data of datas) {
									let prpics_url = "../../../../img/common/Image_not_available.png";
									if (data.paProd.paProdPic.length !== 0) {
										prpics_url = data.paProd.paProdPic[0].paProdPic;
									}
									let prodSubTTL = data.paProdSum * data.paOrdQty;
									prodGrandTotal += prodSubTTL;
									cart_li += `
                        <li id="li_${data.paProd.paProdNo}">
                            <div class="item clearfix" data-product-id="${data.paProd.paProdNo}"> 
                                <button type="button" class="s-close" aria-hidden="true" onclick="removeCartProd(this)">×</button> 
                                <a href="#" data-toggle="lightbox" class="entry-thumbnail">
                                    <img src="${prpics_url}" alt="${data.paProd.paProdName}">
                                </a>
                                <h5 class="entry-title cart-entry-title"><a href="#">${data.paProd.paProdName}</a></h5>
                                <span class="entry-price s-entry-price">$ <span class="s-price">${data.paProdSum}</span> x <span class="s-qty">${data.paOrdQty}</span></span>
                            </div>
                        </li>
                    `;

								}
								$(".s-cart-items").html(cart_li);
								$(".s-cart-total > .total").html("$ " + prodGrandTotal);
							}
						});
				}
				updateCartItem();

				function removeCartProd(btnEl) {
					let paProdNo = btnEl.closest(".item").getAttribute("data-product-id");

					let paCartId = {
						memberNo: null,
						paProdNo: paProdNo
					};
					fetch("/BuyGo/needLoginApi/pa/cart/removeProd", {
						method: "POST",
						headers: { "Content-Type": "application/json" },
						body: JSON.stringify({ paCartId })
					})
						.then(resp => resp.json())
						.then(body => {
							if (body.successful) {
								$("#li_" + paProdNo).fadeOut(500, function () {
									$(this).remove();
									calcuCartGrandTotal();
								});
							}
						});
				}

				function calcuCartGrandTotal() {
					let prodEls = document.querySelectorAll(".s-entry-price");
					let grandTotal = 0
					for (let prodEl of prodEls) {
						let price = parseInt(prodEl.querySelector(".s-price").textContent);
						let qty = parseInt(prodEl.querySelector(".s-qty").textContent);
						grandTotal += price * qty;
					}
					$(".s-cart-total > .total").html("$ " + grandTotal);
				}

			}



		</script>

	</body>

</html>